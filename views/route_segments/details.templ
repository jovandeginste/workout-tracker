package route_segments

import (
	"github.com/invopop/ctxi18n/i18n"
	"github.com/jovandeginste/workout-tracker/pkg/database"
	"github.com/jovandeginste/workout-tracker/views/helpers"
	"github.com/jovandeginste/workout-tracker/views/partials"
)

templ details(s *database.RouteSegment) {
	{{ preferredUnits := helpers.CurrentUser(ctx).PreferredUnits() }}
	<table>
		<tbody>
			if s.HasFile() {
				<tr>
					<td>
						@helpers.IconFor("file")
					</td>
					<th>{ i18n.T(ctx, "File") }</th>
					<td>{ s.Filename }</td>
				</tr>
			}
			<tr>
				<td>
					@helpers.IconFor("date")
				</td>
				<th>{ i18n.T(ctx, "Created") }</th>
				<td>
					@partials.SnippetDate(&s.CreatedAt)
				</td>
			</tr>
			<tr>
				<td>
					@helpers.IconFor("date")
				</td>
				<th>{ i18n.T(ctx, "Updated") }</th>
				<td>
					@partials.SnippetDate(&s.UpdatedAt)
				</td>
			</tr>
			<tr>
				<td>
					@helpers.IconFor("location")
				</td>
				<th>{ i18n.T(ctx, "Location") }</th>
				<td>{ s.Address() }</td>
			</tr>
			<tr>
				<td>
					@helpers.IconFor("bidirectional")
				</td>
				<th>{ i18n.T(ctx, "Bidirectional") }</th>
				<td>
					@templ.Raw(helpers.BoolToHTML(s.Bidirectional))
				</td>
			</tr>
			<tr>
				<td>
					@helpers.IconFor("circular")
				</td>
				<th>{ i18n.T(ctx, "Circular") }</th>
				<td>
					@templ.Raw(helpers.BoolToHTML(s.Circular))
				</td>
			</tr>
			<tr>
				<td>
					@helpers.IconFor("distance")
				</td>
				<th>{ i18n.T(ctx, "Total distance") }</th>
				<td class="whitespace-nowrap font-mono">
					{ helpers.HumanDistance(ctx, s.TotalDistance) } { preferredUnits.Distance() }
				</td>
			</tr>
			<tr>
				<td>
					@helpers.IconFor("elevation")
				</td>
				<th>{ i18n.T(ctx, "Min elevation") }</th>
				<td class="whitespace-nowrap font-mono">
					{ helpers.HumanElevation(ctx, s.MinElevation) } { preferredUnits.Elevation() }
				</td>
			</tr>
			<tr>
				<td>
					@helpers.IconFor("elevation")
				</td>
				<th>{ i18n.T(ctx, "Max elevation") }</th>
				<td class="whitespace-nowrap font-mono">
					{ helpers.HumanElevation(ctx, s.MaxElevation) } { preferredUnits.Elevation() }
				</td>
			</tr>
			<tr>
				<td>
					@helpers.IconFor("up")
				</td>
				<th>{ i18n.T(ctx, "Total up") }</th>
				<td class="whitespace-nowrap font-mono">
					{ helpers.HumanElevation(ctx, s.TotalUp) } { preferredUnits.Elevation() }
				</td>
			</tr>
			<tr>
				<td>
					@helpers.IconFor("down")
				</td>
				<th>{ i18n.T(ctx, "Total down") }</th>
				<td class="whitespace-nowrap font-mono">
					{ helpers.HumanElevation(ctx, s.TotalDown) } { preferredUnits.Elevation() }
				</td>
			</tr>
		</tbody>
	</table>
}
